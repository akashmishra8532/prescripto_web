import{j as e}from"./ui-DPH0Ivl9.js";import{r as t}from"./vendor-DvM9cOmr.js";import{A as s}from"./index-BeqSwC7l.js";import{a,B as r}from"./utils-BTPxR1Ie.js";import"./router-CpF0eKKI.js";const l=()=>{const{backendUrl:l,token:n,getDoctorsData:o}=t.useContext(s),[d,c]=t.useState([]),m=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=e=>{const t=e.split("_");return`${t[0]} ${m[Number(t[1])]} ${t[2]}`},x=async()=>{try{const{data:e}=await a.get(l+"/api/user/appointments",{headers:{token:n}});e.success&&c(e.appointments.reverse())}catch(e){r.error(e.message)}};return t.useEffect(()=>{n&&x()},[n]),e.jsxs("div",{className:"max-w-4xl mx-auto p-6 md:p-10",children:[e.jsx("p",{className:"text-3xl font-bold text-gray-800 mb-8",children:"My Appointments"}),e.jsx("div",{className:"space-y-6",children:0===d.length?e.jsx("div",{className:"text-center text-gray-500 text-lg",children:"No appointments found."}):d.map((t,s)=>e.jsxs("div",{className:"flex flex-col md:flex-row items-center bg-white shadow-md hover:shadow-xl rounded-xl p-6 transition-all duration-300",children:[e.jsx("img",{src:t.docData.image,alt:t.docData.name,className:"w-24 h-24 rounded-full object-cover mb-4 md:mb-0 md:mr-6"}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("p",{className:"text-xl font-semibold text-gray-800",children:t.docData.name}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:t.docData.speciality}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Address:"})," ",t.docData.address.line1,", ",t.docData.address.line2]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Date & Time:"})," ",i(t.slotDate)," | ",t.slotTime]})]})]}),e.jsx("div",{className:"mt-4 md:mt-0 md:ml-6 flex flex-col space-y-2 w-full md:w-auto",children:t.cancelled?e.jsx("div",{className:"w-full md:w-40 py-2 border border-red-500 text-red-500 rounded-lg font-medium text-center",children:"Cancelled"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"w-full md:w-40 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 hover:from-indigo-500 hover:to-blue-500",children:"Pay Online"}),e.jsx("button",{onClick:()=>(async e=>{try{const{data:t}=await a.post(l+"/api/user/cancel-appointment",{appointmentId:e},{headers:{token:n}});t.success?(r.success(t.message),x(),o()):r.error(t.message)}catch(t){r.error(t.message)}})(t._id),className:"w-full md:w-40 py-2 bg-red-500 text-white rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 hover:bg-red-600",children:"Cancel"})]})})]},s))})]})};export{l as default};
