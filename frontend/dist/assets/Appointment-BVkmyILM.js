import{j as e}from"./ui-DPH0Ivl9.js";import{r as t}from"./vendor-DvM9cOmr.js";import{A as s}from"./index-BeqSwC7l.js";import{a}from"./assets-DaHxpKbP.js";import{u as l,b as o}from"./router-CpF0eKKI.js";import{B as i,a as r}from"./utils-BTPxR1Ie.js";const n=({speciality:a,docId:o})=>{const{doctors:i}=t.useContext(s),r=l(),[n,c]=t.useState([]);return t.useEffect(()=>{if(i.length>0&&a){const e=i.filter(e=>e.speciality===a&&e._id!==o);c(e)}},[i,a,o]),e.jsxs("div",{className:"flex flex-col items-center gap-6 my-16 text-gray-900 md:mx-10",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Related Doctors"}),e.jsxs("p",{className:"sm:w-1/2 text-center text-sm text-gray-600",children:["Browse similar trusted doctors in ",a,"."]}),n.length>0?e.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-5 pt-8 px-3 sm:px-0",children:n.slice(0,5).map((t,s)=>e.jsxs("div",{onClick:()=>{r(`/appointment/${t._id}`),scrollTo(0,0)},className:"border border-blue-100 rounded-xl overflow-hidden cursor-pointer hover:-translate-y-2 transition-all duration-300 hover:shadow-lg bg-white",children:[e.jsx("img",{className:"w-full h-40 object-cover bg-blue-50",src:t.image,alt:t.name}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-500 text-sm mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("p",{children:"Available"})]}),e.jsx("p",{className:"text-gray-900 text-base font-semibold",children:t.name}),e.jsx("p",{className:"text-gray-500 text-sm",children:t.speciality})]})]},s))}):e.jsx("p",{className:"text-sm text-gray-500 mt-6",children:"No related doctors available right now."}),e.jsx("button",{onClick:()=>{r("/doctors"),scrollTo(0,0)},className:"bg-blue-50 hover:bg-blue-100 text-gray-700 px-10 py-2 rounded-full mt-10 transition shadow-md hover:shadow-lg text-sm",children:"View All Doctors"})]})},c=()=>{var c;const{docId:d}=o(),{doctors:m,currencySymbol:x,backendUrl:u,token:g,getDoctorsData:h}=t.useContext(s),[p,b]=t.useState(null),[f,j]=t.useState([]),[w,y]=t.useState(0),[v,N]=t.useState(""),D=l(),k=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return t.useEffect(()=>{(()=>{const e=m.find(e=>e._id===d);b(e)})()},[m,d]),t.useEffect(()=>{(()=>{var e,t;if(!p)return;j([]);const s=new Date;let a=[];for(let l=0;l<7;l++){const o=new Date;o.setDate(s.getDate()+l);const i=new Date(o);i.setHours(21,0,0,0),0===l?(o.setHours(Math.max(s.getHours()+1,10)),o.setMinutes(s.getMinutes()>30?30:0)):o.setHours(10,0,0,0);const r=[];for(;o<i;){const s=o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),a=`${o.getDate()}_${o.getMonth()+1}_${o.getFullYear()}`;(null==(t=null==(e=p.slots_booked)?void 0:e[a])?void 0:t.includes(s))||r.push({datetime:new Date(o),time:s}),o.setMinutes(o.getMinutes()+30)}a.push(r)}j(a)})()},[p]),p&&e.jsxs("div",{className:"p-6 md:p-10 bg-gray-100 min-h-screen flex flex-col items-center",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-2xl mb-10",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("img",{src:p.image,alt:p.name,className:"w-20 h-20 rounded-full object-cover shadow"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[p.name,e.jsx("img",{src:a.verified_icon,alt:"verified",className:"w-5 h-5"})]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[p.degree," - ",p.speciality]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Experience"}),e.jsx("span",{className:"inline-block bg-blue-500 text-white text-xs px-3 py-1 rounded-full mt-1",children:p.experience}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center font-semibold text-gray-700 mb-2",children:["About ",e.jsx("img",{src:a.info_icon,className:"w-4 h-4 ml-2",alt:"info"})]}),e.jsx("p",{className:"text-gray-600 text-l",children:p.about})]}),e.jsxs("p",{className:"mt-4 text-gray-500 font-medium",children:["Appointment Fee: ",e.jsxs("span",{className:"text-gray-800",children:[x,p.fees]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-2xl",children:[e.jsx("p",{className:"text-xl font-semibold text-gray-800 mb-5",children:"Select a Slot"}),e.jsx("div",{className:"flex gap-5 overflow-x-auto pb-5",children:f.map((t,s)=>{var a,l;return e.jsxs("button",{onClick:()=>{y(s),N("")},className:"min-w-[90px] text-center py-4 px-4 rounded-xl text-base font-semibold transition-all \n                "+(w===s?"bg-blue-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[e.jsx("p",{children:null==(a=t[0])?void 0:a.datetime.getDate()}),e.jsx("p",{className:"text-sm",children:k[null==(l=t[0])?void 0:l.datetime.getDay()]})]},s)})}),e.jsx("div",{className:"flex gap-5 overflow-x-auto mt-5",children:null==(c=f[w])?void 0:c.map((t,s)=>e.jsx("button",{onClick:()=>N(t.time),className:"px-5 py-3 rounded-full text-base font-medium border transition-all\n                "+(t.time===v?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t.time.toLowerCase()},s))}),e.jsx("button",{onClick:async()=>{if(!g)return i.warn("Login to book the appointment"),D("/login");try{const e=f[w][0].datetime,t=`${e.getDate()}_${e.getMonth()+1}_${e.getFullYear()}`,{data:s}=await r.post(u+"/api/user/book-appointment",{docId:d,slotDate:t,slotTime:v},{headers:{token:g}});s.success?(i.success(s.message),h(),D("/my-appointments")):i.error(s.message)}catch(e){i.error(e.message)}},disabled:!v,className:"w-full mt-8 py-4 rounded-xl text-base font-semibold transition-all\n            "+(v?"bg-gradient-to-r from-blue-500 to-indigo-500 hover:opacity-90 text-white shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:v?"Book Appointment":"Select Time to Book"})]}),e.jsx("div",{className:"w-full max-w-2xl mt-10",children:e.jsx(n,{docId:d,speciality:p.speciality})})]})};export{c as default};
